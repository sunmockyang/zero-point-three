<!DOCTYPE html>
<meta charset="utf-8" />
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=0.65, maximum-scale=1">
	<title>Underground | Priscilla Hwang</title>
	<link rel="stylesheet" type="text/css" href="stylesheet.css">
	<link href="https://vjs.zencdn.net/5.8.7/video-js.css" rel="stylesheet">
	<link href="libs/videojs/videojs_stylesheet.css" rel="stylesheet">
	<link href='https://fonts.googleapis.com/css?family=Alegreya+Sans+SC:400,300,100|PT+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
	<link rel="prefetch" href="content/images/preloader_bg.jpg" />
	<link rel="prefetch" href="img/loading.svg" />
	<meta property="og:url" content="http://underground.priscillahwang.com" />
	<meta property="og:type" content="article" />
	<meta property="og:title" content="Underground | Priscilla Hwang" />
	<meta property="og:site_name" content="Underground" />
	<meta property="og:description" content="A multimedia investigation into the lives of a religious minority living in a Muslim society." />
	<meta property="og:image" content="http://underground.priscillahwang.com/content/images/preloader_bg.jpg" />

	<script type="text/javascript">

	function LoadFile(path, mimeType, callback) {
		var xobj = new XMLHttpRequest();
		if (mimeType) {xobj.overrideMimeType(mimeType);}
		xobj.open('GET', path, true);
		xobj.onreadystatechange = function () {
			if (xobj.readyState == 4 && xobj.status == "200") {
				callback(xobj.responseText);
			}
		};
		xobj.send(null);  
	};

	// Load sections
	var sectionPaths = ["01-Prologue.html",
						"02-Mohammed-Ali.html",
						"03-Manel.html",
						"04-Safa.html",
						"05-Lilli.html",
						"06-UndergroundChurch.html",
						"07-Islams-Response.html",
						"08-TunisianSociety.html",
						"09-Conclusion.html",
						"10-Epilogue.html"]

	var sectionsLoaded = false;
	var loadedSections = {};

	function onSectionLoad(path, html) {
		loadedSections[path] = html;

		for (var i in loadedSections) {
			if (loadedSections[i] === null){
				return;
			}
			else if (loadedSections[i] !== true) {
				console.log("Injecting section: ", i);
				injectSection(loadedSections[i]);
				loadedSections[i] = true;
			}
		}

		// All the sections have been loaded. proceed with rendering
		sectionsLoaded = true;
		onLoad();
	};

	for (var i = 0; i < sectionPaths.length; i++) {
		loadedSections[sectionPaths[i]] = null;

		LoadFile("content/sections/" + sectionPaths[i], null, onSectionLoad.bind(window, sectionPaths[i]));
	};
	</script>
</head>
<body>

<!-- Preloader -->
<div id="preloader">
	<div class="content">
		<div id="preloaderButton" data-text="<span>-</span> Enter <span>-</span>">
			<img src="img/loading.svg" alt="Loading..." />
		</div>
		<div class="title">Underground</div>
	</div>
</div>

<!-- Background media -->
<div class="background-media-container">
	<div class="intro-video-container">
		<video class="fullscreen video" id="video1" data-aspect-ratio="1.7778" poster="content/intro_videos/F_Intro_Muslim2.jpg" loop="" preload="auto">
			<source src="https://s3.amazonaws.com/sunnymock/zeropointthree/content/F_Intro_Muslim2.webm" type="video/webm">
			<source src="https://s3.amazonaws.com/sunnymock/zeropointthree/content/F_Intro_Muslim2.mp4" type="video/mp4">
		</video>
		<video class="fullscreen video" id="video2" data-aspect-ratio="1.7778" volume="0" poster="content/intro_videos/F_Intro_Christian1.jpg" loop preload="auto">
			<source src="https://s3.amazonaws.com/sunnymock/zeropointthree/content/F_Intro_Christian1.webm" type="video/webm">
			<source src="https://s3.amazonaws.com/sunnymock/zeropointthree/content/F_Intro_Christian1.mp4" type="video/mp4">
		</video>
		<div class="video-overlay">
			<img id="introDownCaret"class="down-caret" src="img/down_caret_white.svg" />
		</div>
	</div>

	<div id="index-background" class="index-background-container hidden">
		<div class="index-background-image show" id="dali_bg"></div>
		<div class="index-background-image" id="mohammed_ali_bg"></div>
		<div class="index-background-image" id="manel_bg"></div>
		<div class="index-background-image" id="safa_bg"></div>
		<div class="index-background-image" id="lilli_bg"></div>
		<div class="index-background-image" id="underground_church_bg"></div>
		<div class="index-background-image" id="islams_response_bg"></div>
		<div class="index-background-image" id="tunisian_society_bg"></div>
		<div class="index-background-image" id="conclusion_bg"></div>
	</div>
</div>

<!-- Nav Bar -->
<div class="navbar">
	<div class="navbar-first-level">
		<div class="navbar-title">Underground.</div>
		<div class="navbar-item-container">
			<div class="navbar-item" data-link-id="index-box">Index</div>
			<div class="navbar-item" data-second-layer="stories_container">Stories<img class="down-caret" src="img/down_caret_white.svg" /></div>
			<div class="navbar-item" data-second-layer="analysis_container">Analysis<img class="down-caret" src="img/down_caret_white.svg" /></div>
			<div class="navbar-item" data-link-id="conclusion">Conclusion</div>
		</div>
	</div>
	<div class="navbar-second-level">
		<div class="navbar-item-container">
			<div id="stories_container" class="hidden no-size">
				<div class="navbar-item" data-link-id="dali">Dali</div>
				<div class="navbar-item" data-link-id="mohammed_ali">Mohamed Ali</div>
				<div class="navbar-item" data-link-id="manel">Manel</div>
				<div class="navbar-item" data-link-id="safa">Safa</div>
				<div class="navbar-item" data-link-id="lilli">Lili</div>
			</div>
			<div id="analysis_container" class="hidden no-size">
				<div class="navbar-item" data-link-id="underground_church">Underground Church</div>
				<div class="navbar-item" data-link-id="islams_response">Islam's Response</div>
				<div class="navbar-item" data-link-id="tunisian_society">Tunisian Society</div>
			</div>
		</div>
	</div>
</div>

<!-- Title -->
<div class="intro-title-container">
	<div id="title1" class="intro-title">
		<span id="title1_text">Underground</span>
	</div>
	<div id="title2" class="intro-title">
		<div id="title2_text">
			The plight of a religious minority living in a Muslim society | Priscilla Hwang
			<br/>
			April 2016.
		</div>
	</div>
</div>

<!-- Article -->

<div id="articleContainer" class="article-container">
	<div id="intro-paragraph">
		<hr id="introStart"/>
		<p class="divergent">Divergent. </p>
		<p class="underground">Underground.</p>
		<p class="undetected">Undetected. </p>
		<p>They chose a life that deviates from the norm. </p>
		<p>Some chose a life of hiding; some chose to expose themselves to society. Many of them don't even know if others like them exist.</p>
		<p>What is life like for this almost invisible group in the periphery of Muslim society?</p>
		<p>This multimedia investigation gives a rare glimpse into the lives of Tunisian Christians, living as the estimated 0.2 per cent among the Muslim 99 per cent.</p>
		<img class="down-caret" onclick="ScrollCenteredElem(document.getElementById('index-box'), 3000, 100);" src="img/down_caret_black.svg" />
	</div>

	<div class="index-wrapper">
		<div id="index-box" class="index-box">

			<div class="index-title">Index</div>
			<hr class="index-hr" />

			<div class="index-header">Part 1: Stories</div>

			<div class="index-item">
				<div class="item-link" data-link-id="dali">Dali</div>
			</div>
			<div class="index-item">
				<div class="item-link" data-link-id="mohammed_ali">Mohamed Ali</div>
			</div>
			<div class="index-item">
				<div class="item-link" data-link-id="manel">Manel</div>
			</div>
			<div class="index-item">
				<div class="item-link" data-link-id="safa">Safa</div>
			</div>
			<div class="index-item">
				<div class="item-link" data-link-id="lilli">Lili</div>
			</div>

			<hr class="index-hr" />
			<div class="index-header">Part 2: Analysis</div>

			<div class="index-item">
				<div class="item-link" data-link-id="underground_church">Underground Church</div>
			</div>
			<div class="index-item">
				<div class="item-link" data-link-id="islams_response">Islam's Response</div>
			</div>
			<div class="index-item">
				<div class="item-link" data-link-id="tunisian_society">Tunisian Society</div>
			</div>
			<hr class="index-hr" />
			<div class="index-item">
				<div class="item-link" data-link-id="conclusion">Conclusion</div>
			</div>
		</div>
	</div>
</div>

<!-- Footer -->
<footer>
	<div class="footer-container">
		<div class="priscilla">
			<a href="http://priscillahwang.com">
				<div class="headshot" onmouseover=""></div>
				<div class="name">Priscilla Hwang</div>
			</a>
		</div>
		<div class="notes">
			<div class="names-changed">* Some names of the Tunisian Christians in this report have been changed for their security.</div>
			<br/>
			<div class="reconstruction">All literary reconstructions were recreated from in-depth interviews with the subjects.</div>
			<div class="interviews">Most interviews and field research done in July and August 2015.</div>
			<br/>
			<div class="special-thanks">
				<div class="title">Special thanks to:</div>
				<div class="names">
					Grace Kim, Khaled Ben Hafaiedh, Dali Khlifi, Kristen Joo, Sunmock Yang
				</div>
				which without whom this project would not have been possible.
				<br/>
				<br/>
				Special thanks to my supervisor and editor, Paul Adams, who supported me from the very beginning.
			</div>
		</div>
		<div class="sunmock">Design by <a href="http://sunmock.com">Sunmock</a> <a href="http://github.com/sunmockyang">Yang</a></div>
	</div>
</footer>

<script type="text/javascript">
// Global vars
var app = null;
var elements = null;

document.documentElement.classList.add("disable-scroll");

// Preload
function onLoad() {
	console.log("Data ready?", document.readyState === "complete",
		sectionsLoaded == true);

	if (document.readyState === "complete" && sectionsLoaded) {
		setTimeout(startApp, 500);
	}
}

function startApp() {
	// After waiting a couple seconds more...
	main();

	var preloaderButton = document.getElementById("preloaderButton");
	preloaderButton.classList.add("button");
	preloaderButton.innerHTML = preloaderButton.dataset.text;
	preloaderButton.onclick = (function () {
		document.getElementById("preloader").classList.add("hide");
		document.documentElement.classList.remove("disable-scroll");
		onAppEnter();
	}).bind(this);
}

// Start main app

function main() {
	processSectionContents();

	var navFirstLevel = document.getElementsByClassName("navbar-first-level")[0];
	var navSecondLevel = document.getElementsByClassName("navbar-second-level")[0];

	elements = {
		background: {
			videoContainer: document.getElementsByClassName('intro-video-container')[0],
			video1: document.getElementById('video1'),
			video2: document.getElementById('video2'),
			title1: document.getElementById('title1'),
			title2: document.getElementById('title2'),
			titleContainer: document.getElementsByClassName("intro-title-container")[0],
			indexBackground: document.getElementById('index-background'),
			videoOverlay: document.getElementsByClassName('video-overlay')[0],
			introDownCaret: document.getElementById('introDownCaret'),
			introParagraph: document.getElementById("intro-paragraph"),
			articleContainer: document.getElementById('articleContainer')
		},

		index: {
			indexButtons: document.getElementsByClassName('item-link'),
			backgroundImages: document.getElementsByClassName('index-background-image'),
			indexWrapper: document.getElementsByClassName("index-wrapper")[0],
			indexBox: document.getElementsByClassName("index-box")[0],
			backgroundContainer: document.getElementsByClassName('background-media-container')[0],
			navbar: document.getElementsByClassName('navbar')[0]
		},

		navbar: {
			title: document.getElementsByClassName('navbar-title')[0],
			container: document.getElementsByClassName('navbar')[0],
			firstLevel: navFirstLevel,
			secondLevel: navSecondLevel,
			firstLevelItems: navFirstLevel.getElementsByClassName('navbar-item'),
			secondLevelItems: navSecondLevel.getElementsByClassName('navbar-item'),
			storyItems: document.getElementById('stories_container'),
			analysisItems: document.getElementById('analysis_container')
		},

		article: {
			introParagraph: document.getElementById("intro-paragraph"),
			container: document.getElementById('articleContainer')
		},

		fullscreenElements: document.getElementsByClassName('fullscreen')
	};
}

function onAppEnter() {
	app = new ZeroPointThree(elements);
	window.onresize = app.onResize.bind(app);
}

function injectSection(text) {
	document.getElementById('articleContainer').innerHTML += text;
}

function processSectionContents() {
	// Setup Tableau
	window.tableau._createNewVizesAndStartLoading();

	// Clear up some memory
	loadedSections = null;

	// Build video players
	var videos = document.getElementsByClassName('video-js');

	for (var i = 0; i < videos.length; i++) {
		videojs(videos[i]);
	}

	// Build lightboxes
	$(".section-image, .section-subtitle, .special-thanks .names").each(function() {
	    $(this).magnificPopup({
	        delegate: 'a',
	        type: 'image',
	        cursor: null,
			image: {
				titleSrc: (function() {return this.title}).bind(this)
			},
	        gallery: {
	          enabled:true
	        }
	    });
	});
}

window.onload = onLoad;
</script>

<script src="https://vjs.zencdn.net/5.8.7/video.js"></script>
<script type='text/javascript' src='https://public.tableau.com/javascripts/api/viz_v1.js'></script>
<script type="text/javascript" src="js/libs/zepto.min.js"></script>
<script type="text/javascript" src="js/libs/magnific.min.js"></script>
<script type="text/javascript" src="js/ZeroPointThree.js"></script>
<script type="text/javascript" src="js/BackgroundMedia.js"></script>
<script type="text/javascript" src="js/IntroBuffer.js"></script>
<script type="text/javascript" src="js/IndexController.js"></script>
<script type="text/javascript" src="js/NavigationBar.js"></script>
<script type="text/javascript" src="js/ScrollRange.js"></script>
<script type="text/javascript" src="js/Utils.js"></script>
<script type="text/javascript" src="js/libs/AnimateScroll.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76693602-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
