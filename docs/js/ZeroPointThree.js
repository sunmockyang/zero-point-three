function ZeroPointThree(e){this.elements=e,this.introBuffer=new IntroBuffer,this.scrollRange={start:0,end:0},AddScrollHandler(this.scrollRange,this.onScroll.bind(this)),this.backgroundMediaController=new BackgroundMedia(this.elements.background,this.introBuffer),this.indexController=new IndexController(this.elements.index,this.onArticleStart.bind(this),this.onArticleUnstart.bind(this)),this.navBarController=new NavigationBar(this.elements.navbar),window.requestAnimationFrame(this.onResize.bind(this))}function resizeFullscreen(e){var t=parseFloat(e.dataset.aspectRatio),n=parseFloat(e.dataset.scale>0?e.dataset.scale:1),i=document.documentElement.clientWidth*n,o=document.documentElement.clientHeight*n;return isNaN(t)?(e.style.width=i+"px",void(e.style.height=o+"px")):(i/o>t?(e.style.width=i+"px",e.style.height=i/t+"px",e.style.left="0px",e.style.top=(o-i/t)/2+"px"):(e.style.width=o*t+"px",e.style.height=o+"px",e.style.top="0px",e.style.left=(i-o*t)/2+"px"),void(1!=n&&(e.style.left=-(i-document.documentElement.clientWidth)/2+"px")))}ZeroPointThree.prototype.onResize=function(){this.introBuffer.onResize();for(var e=0;e<this.elements.fullscreenElements.length;e++)window.requestAnimationFrame(resizeFullscreen.bind(this,this.elements.fullscreenElements[e]));this.backgroundMediaController.onResize(this.introBuffer);var t=document.documentElement;this.scrollRange.end="scrollMaxY"in window?window.scrollMaxY:t.scrollHeight-t.clientHeight,this.indexController.scrollRange.start=this.elements.article.introParagraph.getBoundingClientRect().bottom+window.pageYOffset,this.indexController.scrollRange.end=this.elements.index.indexWrapper.getBoundingClientRect().height+this.indexController.scrollRange.start,this.indexController.onScroll()},ZeroPointThree.prototype.onScroll=function(e){window.requestAnimationFrame(this.backgroundMediaController.onScroll.bind(this.backgroundMediaController,e)),window.requestAnimationFrame(this.indexController.onScroll.bind(this.indexController))},ZeroPointThree.prototype.onArticleStart=function(){this.navBarController.showContainer()},ZeroPointThree.prototype.onArticleUnstart=function(){this.navBarController.hideContainer()};