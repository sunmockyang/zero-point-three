function IndexController(t,n,e){this.buttonElems=t.indexButtons,this.indexWrapperElem=t.indexWrapper,this.indexBoxElem=t.indexBox,this.backgroundContainer=t.backgroundContainer,this.backgroundImageElems={},this.onArticleStartCB=n,this.onArticleUnstartCB=e,this.lastImage=t.backgroundImages[0];for(var i=0;i<t.backgroundImages.length;i++)this.backgroundImageElems[t.backgroundImages[i].id]=t.backgroundImages[i],this.AnimateBGImageOut(t.backgroundImages[i]);this.AnimateBGImageIn(this.lastImage),this.lastRange=-(1/0),this.setupButtons(),window.requestAnimationFrame(this.onScroll.bind(this))}IndexController.prototype.scrollRange={start:0,end:0},IndexController.prototype.animateInMark=-.3,IndexController.prototype.animateOutStartMark=.5,IndexController.prototype.animateOutEndMark=.7,IndexController.prototype.startArticleMark=.8,IndexController.prototype.setupButtons=function(){for(var t in this.buttonElems)this.buttonElems[t].onmouseover=this.buttonOnMouseOver.bind(this,this.buttonElems[t]),this.buttonElems[t].onclick=this.buttonOnClick.bind(this,this.buttonElems[t])},IndexController.prototype.onScroll=function(){var t=(window.pageYOffset-this.scrollRange.start)/(this.scrollRange.end-this.scrollRange.start);OnMarkerCrossed(this.animateInMark,this.lastRange,t,this.onAnimateIn.bind(this),this.onAnimateOut.bind(this));var n=1-(t-this.animateOutStartMark)/(this.animateOutEndMark-this.animateOutStartMark);n=Mathx.normalize(n),this.indexWrapperElem.style.opacity=n,OnMarkerCrossed(this.startArticleMark,this.lastRange,t,this.startArticle.bind(this),this.unstartArticle.bind(this)),this.lastRange=t},IndexController.prototype.onAnimateIn=function(){this.indexBoxElem.classList.add("animate-in");for(var t=this.indexBoxElem.children,n=0;n<t.length;n++)setTimeout(function(n){t[n].classList.add("animate-in")}.bind(this,n),50*n)},IndexController.prototype.onAnimateOut=function(){this.indexBoxElem.classList.remove("animate-in");for(var t=this.indexBoxElem.children,n=t.length-1;n>0;n--)t[n].classList.remove("animate-in")},IndexController.prototype.buttonOnMouseOver=function(t){var n=t.dataset.linkId+"_bg";this.lastImage!=this.backgroundImageElems[n]&&(this.AnimateBGImageIn(this.backgroundImageElems[n]),this.AnimateBGImageOut(this.lastImage),this.lastImage=this.backgroundImageElems[n])},IndexController.prototype.buttonOnClick=function(t){ScrollToSection(t.dataset.linkId)},IndexController.prototype.AnimateBGImageIn=function(t){t.classList.add("show")},IndexController.prototype.AnimateBGImageOut=function(t){t.classList.remove("show")},IndexController.prototype.startArticle=function(){fadeOut(this.backgroundContainer),this.onArticleStartCB()},IndexController.prototype.unstartArticle=function(){fadeIn(this.backgroundContainer),this.onArticleUnstartCB()};